<%- include('../partials/header', {title: 'Add New Movie'}) %>

<main>
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;flex-wrap:wrap;gap:1rem;">
        <h2 style="margin:0;">Add New Movie</h2>
        <a href="/movies/mine">
            <button class="secondary" style="font-size:0.9rem;padding:0.5rem 1rem;">‚Üê Back to My Movies</button>
        </a>
    </div>
    <% if (typeof errors !== 'undefined' && errors && errors.length) { %>
        <div class="errors">
            <ul>
                <% errors.forEach(function(err){ %>
                    <li><%= err %></li>
                <% }) %>
            </ul>
        </div>
    <% } %>
    <div class="form-container">
        <form action="/movies/add" method="post">
            <div>
                <label for="title">Title</label>
                <input type="text" id="title" name="title" required value="<%= typeof old !== 'undefined' && old && old.title ? old.title : '' %>" autofocus />
            </div>
            <div>
                <label for="description">Description</label>
                <textarea id="description" name="description" rows="4" required><%= typeof old !== 'undefined' && old && old.description ? old.description : '' %></textarea>
            </div>
            <div>
                <label for="year">Year</label>
                <input type="number" id="year" name="year" required min="1888" max="<%= new Date().getFullYear() + 1 %>" value="<%= typeof old !== 'undefined' && old && old.year ? old.year : '' %>" />
            </div>
            <div>
                <label for="genres">Genres (comma separated)</label>
                <input type="text" id="genres" name="genres" placeholder="e.g., Action, Drama, Comedy" value="<%= typeof old !== 'undefined' && old && old.genres ? old.genres : '' %>" required />
            </div>

            <div style="display:flex;gap:0.75rem;flex-wrap:wrap;">
                <button type="submit">Add Movie</button>
                <a href="/movies/mine">
                    <button type="button" class="secondary">Cancel</button>
                </a>
            </div>
        </form>
    </div>
</main>

<%- include('../partials/footer') %>