<%- include('../partials/header', {title: 'Movies', currentUser: currentUser}) %>
<h1>Add New Movie</h1>
<div class="form-container">
    <% if (errors && errors.length > 0) { %>
        <ul class="errors">
            <% errors.forEach(e => { %>
                <li><%= e %></li>
            <% }) %>
        </ul>
    <% } %>

    <form action="/movies/add" method="post">
         <div>
            <label for="title">Title:</label>
            <input type="text" id="title" name="title" required value="<%= old && old.title ? old.title : '' %>">
        </div>
        <div>
            <label for="description">Description:</label>
            <input type="text" id="description" name="description" required value="<%= old && old.description ? old.description : '' %>">
        </div>

        <div>
            <label for="year">Year:</label>
            <input type="text" id="year" name="year" required value="<%= old && old.year ? old.year : '' %>">
        </div>

        <div class="rating-container">
    <p>Rating:</p>

    <div class="star-rating">
        <% for (var i = 5; i >= 1; i--) { %>
            <input type="radio" id="star<%= i %>" name="rating" value="<%= i %>"
                <%= old && old.rating == i ? 'checked' : '' %> required>
            <label for="star<%= i %>" title="<%= i %> stars">â˜…</label>
        <% } %>
    </div>
    </div>
        <div>
            <label for="genres">Genres (comma separated):</label>
            <input type="text" id="genres" name="genres" value="<%= old && old.genres ? old.genres : '' %>">
        </div>
        <button type="submit" class="submit-btn">Add Movie</button>
    </form>
</div>
<%- include('../partials/footer') %>