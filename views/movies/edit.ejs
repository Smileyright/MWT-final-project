<%- include('../partials/header', {title: 'Edit ' + movie.title}) %>

<main>
  <h2>Edit Movie</h2>

  <% if (errors && errors.length) { %>
    <div class="errors">
      <ul>
        <% errors.forEach(function(err){ %>
          <li><%= err %></li>
        <% }) %>
      </ul>
    </div>
  <% } %>

  <div class="form-container">
    <form action="/movies/<%= movie._id %>/edit" method="post">
      <div>
        <label for="title">Title</label>
        <input type="text" id="title" name="title" required value="<%= movie.title %>">
      </div>
      <div>
        <label for="description">Description</label>
        <textarea id="description" name="description" rows="4" required><%= movie.description %></textarea>
      </div>
      <div>
        <label for="year">Year</label>
        <input type="text" id="year" name="year" required value="<%= movie.year %>">
      </div>
      <div>
        <label for="genres">Genres (comma separated)</label>
        <input type="text" id="genres" name="genres" value="<%= movie.genres ? movie.genres.join(',') : '' %>">
      </div>

      <button type="submit">Save</button>
      <a href="/movies/<%= movie._id %>" class="secondary" style="margin-left:.5rem"><button type="button" class="secondary">Cancel</button></a>
    </form>
  </div>
</main>

<%- include('../partials/footer') %>
